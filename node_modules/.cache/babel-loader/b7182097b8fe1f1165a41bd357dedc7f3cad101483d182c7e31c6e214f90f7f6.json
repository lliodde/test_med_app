{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{API_URL}from'../../config';import'./Login.css';// Make sure you have this CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{// State variables to hold the form data\nconst[password,setPassword]=useState(\"\");const[email,setEmail]=useState('');const navigate=useNavigate();// If a user is already logged in, redirect them to the home page\nuseEffect(()=>{if(sessionStorage.getItem(\"auth-token\")){navigate(\"/\");}},[navigate]);// Function to handle the login form submission\nconst login=async e=>{e.preventDefault();// Call the login API endpoint\nconst res=await fetch(\"\".concat(API_URL,\"/api/auth/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})});const json=await res.json();if(json.authtoken){// If login is successful, store the auth token and email\nsessionStorage.setItem('auth-token',json.authtoken);sessionStorage.setItem('email',email);// Redirect to home page and reload\nnavigate('/');window.location.reload();}else{// Show an alert if there are errors\nif(json.errors){const errorMsg=json.errors.map(error=>error.msg).join(', ');alert(errorMsg);}else{alert(json.error);}}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"sub-text\",children:[\"Are you a new member? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign Up Here\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:login,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:e=>setEmail(e.target.value),type:\"email\",name:\"email\",id:\"email\",className:\"form-control\",placeholder:\"Enter your email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:e=>setPassword(e.target.value),type:\"password\",name:\"password\",id:\"password\",className:\"form-control\",placeholder:\"Enter your password\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-submit\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"btn-reset\",children:\"Reset\"})]})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","API_URL","jsx","_jsx","jsxs","_jsxs","Login","password","setPassword","email","setEmail","navigate","sessionStorage","getItem","login","e","preventDefault","res","fetch","concat","method","headers","body","JSON","stringify","json","authtoken","setItem","window","location","reload","errors","errorMsg","map","error","msg","join","alert","className","children","to","onSubmit","htmlFor","value","onChange","target","type","name","id","placeholder","required"],"sources":["/home/project/test_med_app/src/Components/Login/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { API_URL } from '../../config';\nimport './Login.css'; // Make sure you have this CSS file\n\nconst Login = () => {\n    // State variables to hold the form data\n    const [password, setPassword] = useState(\"\");\n    const [email, setEmail] = useState('');\n    const navigate = useNavigate();\n\n    // If a user is already logged in, redirect them to the home page\n    useEffect(() => {\n        if (sessionStorage.getItem(\"auth-token\")) {\n            navigate(\"/\");\n        }\n    }, [navigate]);\n\n    // Function to handle the login form submission\n    const login = async (e) => {\n        e.preventDefault();\n        \n        // Call the login API endpoint\n        const res = await fetch(`${API_URL}/api/auth/login`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                email: email,\n                password: password,\n            }),\n        });\n\n        const json = await res.json();\n        \n        if (json.authtoken) {\n            // If login is successful, store the auth token and email\n            sessionStorage.setItem('auth-token', json.authtoken);\n            sessionStorage.setItem('email', email);\n\n            // Redirect to home page and reload\n            navigate('/');\n            window.location.reload();\n        } else {\n            // Show an alert if there are errors\n            if (json.errors) {\n                const errorMsg = json.errors.map(error => error.msg).join(', ');\n                alert(errorMsg);\n            } else {\n                alert(json.error);\n            }\n        }\n    };\n\n    return (\n        <div className=\"login-container\">\n            <div className=\"login-form-container\">\n                <h1>Login</h1>\n                <p className=\"sub-text\">\n                    Are you a new member? <Link to=\"/signup\">Sign Up Here</Link>\n                </p>\n                <form onSubmit={login}>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"email\">Email</label>\n                        <input\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                            type=\"email\"\n                            name=\"email\"\n                            id=\"email\"\n                            className=\"form-control\"\n                            placeholder=\"Enter your email\"\n                            required\n                        />\n                    </div>\n                    {/* COMPLETED: Added the password input field */}\n                    <div className=\"form-group\">\n                        <label htmlFor=\"password\">Password</label>\n                        <input\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                            type=\"password\"\n                            name=\"password\"\n                            id=\"password\"\n                            className=\"form-control\"\n                            placeholder=\"Enter your password\"\n                            required\n                        />\n                    </div>\n                    <div className=\"btn-group\">\n                        <button type=\"submit\" className=\"btn-submit\">Login</button>\n                        <button type=\"reset\" className=\"btn-reset\">Reset</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}